<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienes una invitación</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    
    <style>
        body {
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background-color: #0a0a2a;
        }

        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        .font-dancing { font-family: 'Dancing Script', cursive; }

        #noBtn {
            position: absolute;
            z-index: 50;
            transition: transform 0.2s ease-out, top 0.1s, left 0.1s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }

        #yesBtn {
            animation: pulse-shadow 2s infinite;
            transition: all 0.3s ease-in-out;
        }
        
        @keyframes pulse-shadow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
            }
            50% {
                box-shadow: 0 0 35px rgba(34, 197, 94, 1);
            }
        }
        
        .sparkle {
            position: absolute;
            bottom: -20px;
            width: 8px;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: floatUp 10s linear infinite;
            opacity: 0;
            z-index: 1;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 0.8;
            }
            100% {
                transform: translateY(-100vh) scale(0.5);
                opacity: 0;
            }
        }

        #envelopeIcon {
            animation: float-icon 3s ease-in-out infinite;
        }
        @keyframes float-icon {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-20px);
            }
        }

    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-indigo-900 to-black min-h-screen flex items-center justify-center p-4">

    <div id="sparkle-container" class="absolute top-0 left-0 w-full h-full overflow-hidden"></div>

    <div id="envelopeScreen" class="fixed top-0 left-0 w-full h-full flex flex-col items-center justify-center z-40 transition-opacity duration-500 ease-in-out">
        <div class="text-center text-white">
            <span id="envelopeIcon" class="material-icons-sharp text-white text-opacity-70" style="font-size: 150px;">
                drafts
            </span>
            <h1 class="font-dancing text-6xl mt-4 mb-6">Una invitación especial...</h1>
            <p class="text-xl text-gray-300 mb-10">...te está esperando.</p>
            <button id="openBtn" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg text-lg transform hover:scale-105 transition-all duration-300">
                Abrir invitación
                <span class="material-icons-sharp align-middle ml-2">
                    local_post_office
                </span>
            </button>
        </div>
    </div>

    <div id="invitationCard" class="bg-white rounded-2xl shadow-2xl p-8 md:p-12 max-w-lg w-full text-center relative z-20 transition-all duration-700 ease-out transform scale-0 opacity-0">
        <h1 class="font-dancing text-6xl font-bold text-indigo-600 mb-4">Para ti...</h1>
        <p class="text-lg text-gray-600 mb-6">Una invitación que no podrás rechazar...</p>
        
        <div class="bg-indigo-50 p-6 rounded-lg shadow-inner mb-8 border border-indigo-100">
            <span class="material-icons-sharp text-5xl text-indigo-500">
                celebration
            </span>
            <h2 class="font-playfair text-3xl font-bold text-indigo-700 mt-2">Fiesta en la UNI</h2>
            <p class="text-gray-600 text-lg mt-2">Viernes, 21 de Noviembre</p>
        </div>
        
        <p class="text-xl font-semibold text-gray-700 mb-10">¿Te gustaría ir conmigo?</p>
        
        <div class="flex justify-center items-center gap-6">
            <button id="yesBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg text-lg transform hover:scale-105">
                ¡Sí, me encantaría!
                <span class="material-icons-sharp align-middle ml-2">
                    favorite
                </span>
            </button>
        </div>
    </div>

    <button id="noBtn" class="hidden bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg text-lg">
        No, gracias
        <span class="material-icons-sharp align-middle ml-2">
            heart_broken
        </span>
    </button>

    <div id="successMessage" class="hidden absolute top-0 left-0 w-full h-full bg-gray-900 bg-opacity-90 z-50 flex items-center justify-center text-center p-4">
        <div class="transform scale-100 transition-all duration-500 ease-in-out">
            <h1 class="font-dancing text-7xl font-bold text-green-400 mb-6">¡Lo sabía!</h1>
            <p class="font-inter text-3xl text-white mb-8">Ya sabía que ibas a aceptar. ¡Nos vemos!</p>
            <div class="flex justify-center gap-4">
                <span class="material-icons-sharp text-7xl text-yellow-400">
                    star
                </span>
                <span class="material-icons-sharp text-7xl text-green-400">
                    celebration
                </span>
                <span class="material-icons-sharp text-7xl text-yellow-400">
                    star
                </span>
            </div>
        </div>
    </div>

    <script>
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const invitationCard = document.getElementById('invitationCard');
        const successMessage = document.getElementById('successMessage');
        const sparkleContainer = document.getElementById('sparkle-container');
        
        const openBtn = document.getElementById('openBtn');
        const envelopeScreen = document.getElementById('envelopeScreen');

        let speed = 5; 
        let posX, posY;
        let velX, velY;
        let yesBtnScale = 1.0;
        let noBtnScale = 1.0;
        let btnRect = null; 

        function initNoButton() {
            btnRect = noBtn.getBoundingClientRect();
            const vw = window.innerWidth;
            const vh = window.innerHeight;
            posX = Math.random() * (vw - btnRect.width * noBtnScale);
            posY = Math.random() * (vh - btnRect.height * noBtnScale);
            velX = (Math.random() > 0.5 ? 1 : -1) * speed;
            velY = (Math.random() > 0.5 ? 1 : -1) * speed;
            noBtn.style.left = `${posX}px`;
            noBtn.style.top = `${posY}px`;
        }

        function moveButton() {
            if (!btnRect) return; 
            const vw = window.innerWidth;
            const vh = window.innerHeight;
            posX += velX;
            posY += velY;

            const currentBtnWidth = btnRect.width * noBtnScale;
            const currentBtnHeight = btnRect.height * noBtnScale;

            if (posX <= 0 || posX + currentBtnWidth >= vw) {
                velX *= -1;
                posX = Math.max(0, Math.min(posX, vw - currentBtnWidth));
            }
            if (posY <= 0 || posY + currentBtnHeight >= vh) {
                velY *= -1;
                posY = Math.max(0, Math.min(posY, vh - currentBtnHeight));
            }

            noBtn.style.left = `${posX}px`;
            noBtn.style.top = `${posY}px`;
            requestAnimationFrame(moveButton);
        }

        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.classList.add('sparkle');
            sparkle.style.left = `${Math.random() * 100}%`;
            
            const duration = (Math.random() * 5) + 5;
            sparkle.style.animationDuration = `${duration}s`;
            sparkle.style.animationDelay = `${Math.random() * 3}s`;
            
            sparkleContainer.appendChild(sparkle);

            setTimeout(() => {
                sparkle.remove();
            }, duration * 1000);
        }
        
        window.addEventListener('load', () => {
            setInterval(createSparkle, 300);
        });
        
        openBtn.addEventListener('click', () => {
            envelopeScreen.classList.add('opacity-0');
            
            setTimeout(() => {
                envelopeScreen.classList.add('hidden');
                
                invitationCard.classList.remove('scale-0', 'opacity-0');
                invitationCard.classList.add('scale-100', 'opacity-100');
                
                noBtn.classList.remove('hidden');
                initNoButton();
                moveButton();
            }, 500); 
        });

        window.addEventListener('resize', () => {
            if (!noBtn.classList.contains('hidden')) {
                initNoButton();
            }
        });

        noBtn.addEventListener('click', () => {
            speed *= 2;
            velX = (velX > 0 ? 1 : -1) * speed;
            velY = (velY > 0 ? 1 : -1) * speed;

            yesBtnScale += 0.25;
            yesBtn.style.transform = `scale(${yesBtnScale})`;
            yesBtn.style.transformOrigin = 'center'; 

            noBtnScale *= 0.8;
            noBtn.style.transform = `scale(${noBtnScale})`;
        });

        yesBtn.addEventListener('click', () => {
            invitationCard.classList.add('opacity-0', 'scale-75');
            noBtn.classList.add('hidden'); 

            setTimeout(() => {
                invitationCard.classList.add('hidden');
                successMessage.classList.remove('hidden');
            }, 700);
        });

    </script>

</body>
</html>